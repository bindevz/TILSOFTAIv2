{
    "_README": "Copy to appsettings.Development.json. Set secrets via: dotnet user-secrets set 'Sql:ConnectionString' 'your-value'",
    "Sql": {
        "ConnectionString": "Server=YOUR_SERVER;Database=TILSOFTAI;User ID=YOUR_USER;Password=YOUR_PASSWORD;TrustServerCertificate=True;",
        "_note": "Use environment variables or dotnet user-secrets for actual values",
        "CommandTimeoutSeconds": 30
    },
    "Redis": {
        "Enabled": false,
        "ConnectionString": "YOUR_REDIS_HOST:6379",
        "DefaultTtlMinutes": 30
    },
    "Auth": {
        "Issuer": "https://YOUR_AUTH_PROVIDER",
        "Audience": "tilsoftai",
        "JwksUrl": "https://YOUR_AUTH_PROVIDER/.well-known/jwks.json",
        "RoleClaimName": "roles",
        "ClockSkewSeconds": 300,
        "TenantClaimName": "tenant_id",
        "UserIdClaimName": "sub",
        "TrustedGatewayClaimName": "trusted_gateway",
        "JwksRefreshIntervalMinutes": 60,
        "JwksRefreshFailureBackoffSeconds": 30,
        "JwksRefreshMaxBackoffSeconds": 600,
        "JwksRequestTimeoutSeconds": 10
    },
    "Chat": {
        "MaxSteps": 12,
        "MaxTokens": 4096,
        "MaxToolCallsPerRequest": 8,
        "MaxRecursiveDepth": 3,
        "CompactionLimits": {
            "ToolResultMaxBytes": 16000,
            "RetainAssistantMessages": 2
        },
        "CompactionRules": {
            "RemoveFields": [
                "CreatedAtUtc",
                "UpdatedAtUtc",
                "CreatedBy",
                "UpdatedBy"
            ],
            "MaxArrayLength": 50,
            "HeadCount": 20,
            "TailCount": 5
        }
    },
    "Localization": {
        "DefaultLanguage": "en",
        "SupportedLanguages": [
            "en",
            "vi"
        ]
    },
    "Governance": {
        "ToolAllowlist": [],
        "ModelCallableSpPrefix": "ai_",
        "InternalSpPrefix": "app_",
        "ToolRoleRequirements": {}
    },
    "Modules": {
        "Enabled": [
            "TILSOFTAI.Modules.Platform",
            "TILSOFTAI.Modules.Model"
        ]
    },
    "Observability": {
        "EnableSqlErrorLog": false,
        "EnableSqlToolLog": false,
        "EnableConversationPersistence": false,
        "RedactLogs": true,
        "RedactionMode": "basic",
        "RetentionDays": 30,
        "PurgeEnabled": false,
        "PurgeRunHourUtc": 2,
        "PurgeBatchSize": 5000
    },
    "SensitiveData": {
        "HandlingMode": "Redact",
        "DisableCachingWhenSensitive": true,
        "DisableToolResultPersistenceWhenSensitive": true
    },
    "ErrorHandling": {
        "ExposeErrorDetail": false,
        "ExposeErrorDetailRoles": [
            "ai_admin"
        ],
        "ExposeErrorDetailInDevelopment": true,
        "MaxDetailLength": 1024
    },
    "Atomic": {
        "MaxLimit": 5000,
        "MaxJoins": 3,
        "MaxTimeRangeDays": 3660
    },
    "ToolCatalogContextPack": {
        "MaxTools": 40,
        "MaxTotalTokens": 900,
        "MaxInstructionTokensPerTool": 60,
        "MaxDescriptionTokensPerTool": 30,
        "PreferTools": []
    },
    "SemanticCache": {
        "Enabled": true,
        "AllowSensitiveContent": false,
        "EnableSqlVectorCache": false
    },
    "Llm": {
        "Provider": "Null",
        "Endpoint": "http://192.168.8.247:6688/v1",
        "ApiKey": "",
        "Model": "gpt-oss:20b",
        "TimeoutSeconds": 120,
        "Temperature": 0.2,
        "MaxResponseTokens": 1024
    },
    "OpenTelemetry": {
        "Enabled": false,
        "ServiceName": "TILSOFTAI",
        "ServiceVersion": "1.0.0",
        "ExporterType": "console",
        "OtlpEndpoint": "http://gpt-oss:20b:4317",
        "SamplerType": "AlwaysOn",
        "SamplingRatio": 1.0,
        "EnableSqlInstrumentation": true,
        "EnableRedisInstrumentation": true,
        "EnableHttpClientInstrumentation": true,
        "EnableAuthKeyRefreshTracing": false
    },
    "Streaming": {
        "ChannelCapacity": 256,
        "DropDeltaWhenFull": true
    },
    "RateLimit": {
        "PermitLimit": 100,
        "WindowSeconds": 60,
        "QueueLimit": 0
    },
    "Validation": {
        "MaxInputLength": 32000,
        "MaxToolArgumentLength": 8000,
        "AllowedUnicodeCategories": [
            "Letter",
            "Number",
            "Punctuation",
            "Symbol",
            "Separator",
            "Mark"
        ],
        "DenyPatterns": [],
        "SanitizeHtmlTags": true,
        "NormalizeUnicode": true,
        "EnablePromptInjectionDetection": true,
        "BlockOnPromptInjection": false,
        "BlockSeverityThreshold": "High",
        "RemoveControlCharacters": true,
        "AllowedControlCharacters": [
            "\t",
            "\n",
            "\r"
        ]
    },
    "Audit": {
        "Enabled": true,
        "EnabledEventTypes": [],
        "SqlEnabled": true,
        "FileEnabled": false,
        "FilePath": "logs/audit/",
        "MaxFileSizeBytes": 104857600,
        "ExternalSinkEnabled": false,
        "ExternalSinkUrl": "",
        "RetentionDays": 365,
        "IncludeRequestBody": false,
        "RedactFields": [
            "password",
            "token",
            "key",
            "secret",
            "apikey",
            "api_key",
            "authorization",
            "credential"
        ],
        "BufferSize": 1000,
        "SqlBatchSize": 100,
        "FlushIntervalSeconds": 5
    },
    "StructuredLogging": {
        "StructuredLoggingEnabled": true,
        "OutputFormat": "Json",
        "IncludeScopes": true,
        "RedactedFields": [
            "password",
            "token",
            "apikey",
            "secret",
            "connectionstring",
            "authorization",
            "cookie"
        ],
        "MaxPropertyValueLength": 1000,
        "EnableRequestResponseLogging": false,
        "SamplingRate": 1.0
    },
    "Metrics": {
        "Enabled": true,
        "EndpointPath": "/metrics",
        "RequireAuthentication": false,
        "AllowedRoles": [],
        "IncludeTenantLabel": true,
        "MaxLabelCardinality": 100,
        "HistogramBuckets": [
            0.005,
            0.01,
            0.025,
            0.05,
            0.1,
            0.25,
            0.5,
            1,
            2.5,
            5,
            10
        ],
        "EnableRuntimeMetrics": true
    },
    "Resilience": {
        "CircuitBreaker": {
            "FailureThreshold": 5,
            "SamplingDurationSeconds": 30,
            "MinimumThroughput": 10,
            "BreakDurationSeconds": 60
        },
        "Retry": {
            "MaxRetries": 3,
            "InitialDelayMs": 100,
            "MaxDelayMs": 10000,
            "BackoffMultiplier": 2.0
        }
    },
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft.AspNetCore": "Warning"
        }
    },
    "AllowedHosts": "*"
}